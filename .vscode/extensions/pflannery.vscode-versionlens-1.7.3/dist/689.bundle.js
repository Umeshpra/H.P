"use strict";exports.id=689,exports.ids=[689],exports.modules={5141:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractProviderConfig=void 0;const guards_1=__webpack_require__(6202);exports.AbstractProviderConfig=class{providerName;config;caching;http;constructor(providerName,config,caching,http){this.providerName=providerName,this.config=config,this.caching=caching,this.http=http,(0,guards_1.throwNotStringOrEmpty)("providerName",providerName),(0,guards_1.throwUndefinedOrNull)("config",config),(0,guards_1.throwUndefinedOrNull)("caching",caching),(0,guards_1.throwUndefinedOrNull)("http",http)}}},2502:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},8128:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(2502),exports),__exportStar(__webpack_require__(6903),exports),__exportStar(__webpack_require__(2041),exports)},6903:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestLightClient=void 0;const guards_1=__webpack_require__(6202),clients_1=__webpack_require__(6502);exports.RequestLightClient=class{xhr;options;logger;constructor(xhr,options,logger){this.xhr=xhr,this.options=options,this.logger=logger,(0,guards_1.throwUndefinedOrNull)("xhr",xhr),(0,guards_1.throwUndefinedOrNull)("options",options),(0,guards_1.throwUndefinedOrNull)("logger",logger)}async request(method,baseUrl,query={},headers={}){const url=clients_1.UrlHelpers.createUrl(baseUrl,query);try{const response=await this.xhr({url,type:method,headers,strictSSL:this.options.http.strictSSL});return{source:clients_1.ClientResponseSource.remote,status:response.status,data:response.responseText,rejected:!1}}catch(error){const errorResponse=error;throw{source:clients_1.ClientResponseSource.remote,status:errorResponse.status,data:errorResponse.responseText,rejected:!0}}}}},2041:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createJsonClient=exports.createHttpClient=void 0;const clients_1=__webpack_require__(6502),RequireLight=__importStar(__webpack_require__(6283)),requestLightClient_1=__webpack_require__(6903);function createHttpClient(options,logger){return new requestLightClient_1.RequestLightClient(RequireLight.xhr,options,logger)}exports.createHttpClient=createHttpClient,exports.createJsonClient=function(options,logger){return new clients_1.JsonHttpClient(createHttpClient(options,logger))}},7689:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NpmUtils=void 0,__exportStar(__webpack_require__(5050),exports),__exportStar(__webpack_require__(833),exports),__exportStar(__webpack_require__(9541),exports),__exportStar(__webpack_require__(3755),exports),__exportStar(__webpack_require__(9787),exports),__exportStar(__webpack_require__(3106),exports),__exportStar(__webpack_require__(7377),exports),__exportStar(__webpack_require__(4085),exports),__exportStar(__webpack_require__(8060),exports),__exportStar(__webpack_require__(2675),exports),exports.NpmUtils=__importStar(__webpack_require__(3813)),__exportStar(__webpack_require__(906),exports)},5050:function(__unused_webpack_module,exports,__webpack_require__){var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GitHubClient=void 0;const guards_1=__webpack_require__(6202),clients_1=__webpack_require__(6502),packages_1=__webpack_require__(7074),suggestions_1=__webpack_require__(804),semver_1=__importDefault(__webpack_require__(912)),defaultHeaders={accept:"application/vnd.github.v3+json","user-agent":"vscode-contrib/vscode-versionlens"};exports.GitHubClient=class{config;jsonClient;logger;constructor(config,jsonClient,logger){this.config=config,this.jsonClient=jsonClient,this.logger=logger,(0,guards_1.throwUndefinedOrNull)("config",config),(0,guards_1.throwUndefinedOrNull)("jsonClient",jsonClient),(0,guards_1.throwUndefinedOrNull)("logger",logger)}fetchGithub(npaSpec){const{validRange}=semver_1.default;return npaSpec.gitRange?this.fetchTags(npaSpec):validRange(npaSpec.gitCommittish,packages_1.VersionUtils.loosePrereleases)?(npaSpec.gitRange=npaSpec.gitCommittish,this.fetchTags(npaSpec)):this.fetchCommits(npaSpec)}async fetchTags(npaSpec){const{user,project}=npaSpec.hosted,tagsRepoUrl=`https://api.github.com/repos/${user}/${project}/tags`,headers=this.getHeaders(),clientResponse=await this.jsonClient.request(clients_1.HttpClientRequestMethods.get,tagsRepoUrl,{},headers),{compareLoose}=semver_1.default,rawVersions=clientResponse.data.map((tag=>tag.name)),allVersions=packages_1.VersionUtils.filterSemverVersions(rawVersions).sort(compareLoose),source=packages_1.PackageSourceType.Github,type=npaSpec.gitRange?packages_1.PackageVersionType.Range:packages_1.PackageVersionType.Version,versionRange=npaSpec.gitRange,resolved={name:project,version:versionRange},{releases,prereleases}=packages_1.VersionUtils.splitReleasesFromArray(allVersions,this.config.prereleaseTagFilter),suggestions=(0,suggestions_1.createSuggestions)(versionRange,releases,prereleases);return{source,responseStatus:{source:clientResponse.source,status:clientResponse.status},type,resolved,suggestions}}async fetchCommits(npaSpec){const{user,project}=npaSpec.hosted,commitsRepoUrl=`https://api.github.com/repos/${user}/${project}/commits`,headers=this.getHeaders(),clientResponse=await this.jsonClient.request(clients_1.HttpClientRequestMethods.get,commitsRepoUrl,{},headers),commits=clientResponse.data.map((commit=>commit.sha)),source=packages_1.PackageSourceType.Github,type=packages_1.PackageVersionType.Committish,versionRange=npaSpec.gitCommittish;if(0===commits.length)return packages_1.ClientResponseFactory.create(packages_1.PackageSourceType.Github,clientResponse,[suggestions_1.SuggestionFactory.createNotFoundStatus()]);const commitIndex=commits.findIndex((commit=>commit.indexOf(versionRange)>-1)),latestCommit=commits[commits.length-1].substr(0,8),isLatest=versionRange===latestCommit,resolved={name:project,version:versionRange},suggestions=[];return-1===commitIndex?suggestions.push(suggestions_1.SuggestionFactory.createNoMatchStatus(),suggestions_1.SuggestionFactory.createLatestUpdateable(latestCommit)):isLatest?suggestions.push(suggestions_1.SuggestionFactory.createMatchesLatestStatus(versionRange)):commitIndex>0&&suggestions.push(suggestions_1.SuggestionFactory.createFixedStatus(versionRange),suggestions_1.SuggestionFactory.createLatestUpdateable(latestCommit)),{source,responseStatus:{source:clientResponse.source,status:clientResponse.status},type,resolved,suggestions,gitSpec:npaSpec.saveSpec}}getHeaders(){const userHeaders={};return this.config.github.accessToken&&this.config.github.accessToken.length>0&&(userHeaders.authorization=`token ${this.config.github.accessToken}`),Object.assign({},userHeaders,defaultHeaders)}}},833:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NpmPackageClient=void 0;const guards_1=__webpack_require__(6202),clients_1=__webpack_require__(6502),packages_1=__webpack_require__(7074),suggestions_1=__webpack_require__(804),npm_package_arg_1=__importDefault(__webpack_require__(9591)),npaSpec_1=__webpack_require__(7377),NpmUtils=__importStar(__webpack_require__(3813));exports.NpmPackageClient=class{config;pacoteClient;githubClient;logger;constructor(config,pacoteClient,githubClient,logger){this.config=config,this.pacoteClient=pacoteClient,this.githubClient=githubClient,this.logger=logger,(0,guards_1.throwUndefinedOrNull)("config",config),(0,guards_1.throwUndefinedOrNull)("pacoteClient",pacoteClient),(0,guards_1.throwUndefinedOrNull)("githubClient",githubClient),(0,guards_1.throwUndefinedOrNull)("logger",logger)}async fetchPackage(request){let source;try{const requestedPackage=request.dependency.package,npaSpec=npm_package_arg_1.default.resolve(requestedPackage.name,requestedPackage.version,requestedPackage.path);switch(npaSpec.type){case npaSpec_1.NpaTypes.Directory:source=packages_1.PackageSourceType.Directory;break;case npaSpec_1.NpaTypes.File:source=packages_1.PackageSourceType.File;break;case npaSpec_1.NpaTypes.Git:source=packages_1.PackageSourceType.Github;break;case npaSpec_1.NpaTypes.Version:case npaSpec_1.NpaTypes.Range:case npaSpec_1.NpaTypes.Remote:case npaSpec_1.NpaTypes.Alias:case npaSpec_1.NpaTypes.Tag:source=packages_1.PackageSourceType.Registry}if(source===packages_1.PackageSourceType.Directory||source===packages_1.PackageSourceType.File)return packages_1.ClientResponseFactory.createDirectoryFromFileProtocol(requestedPackage);if(source===packages_1.PackageSourceType.Github){if(!npaSpec.hosted)throw{status:"EUNSUPPORTEDPROTOCOL",data:"Git url could not be resolved",source:clients_1.ClientResponseSource.local};return npaSpec.gitCommittish||"shortcut"===npaSpec.hosted.default?await this.githubClient.fetchGithub(npaSpec):packages_1.ClientResponseFactory.createGit()}return await this.pacoteClient.fetchPackage(request,npaSpec)}catch(response){this.logger.debug("Caught exception from %s: %O",source,response),response.data||(response=NpmUtils.convertNpmErrorToResponse(response,clients_1.ClientResponseSource.remote));const status=response.status&&!Number.isInteger(response.status)&&response.status.startsWith("E")?response.status.substr(1):response.status;let suggestions;if(suggestions="CONNREFUSED"==status?[suggestions_1.SuggestionFactory.createConnectionRefusedStatus()]:"CONNRESET"==status?[suggestions_1.SuggestionFactory.createConnectionResetStatus()]:"UNSUPPORTEDPROTOCOL"==status||"Not implemented yet"==response.data?[suggestions_1.SuggestionFactory.createNotSupportedStatus()]:"INVALIDTAGNAME"==status||response.data.includes("Invalid comparator:")?[suggestions_1.SuggestionFactory.createInvalidStatus(""),suggestions_1.SuggestionFactory.createLatestUpdateable()]:"INVALIDPACKAGENAME"==status?[suggestions_1.SuggestionFactory.createInvalidStatus("")]:128==status?[suggestions_1.SuggestionFactory.createNotFoundStatus()]:[suggestions_1.SuggestionFactory.createFromHttpStatus(status)],null===suggestions)throw response;return packages_1.ClientResponseFactory.create(source,packages_1.ClientResponseFactory.createResponseStatus(response.source,response.status),suggestions)}}}},9541:function(__unused_webpack_module,exports,__webpack_require__){var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PacoteClient=void 0;const guards_1=__webpack_require__(6202),clients_1=__webpack_require__(6502),packages_1=__webpack_require__(7074),suggestions_1=__webpack_require__(804),semver_1=__importDefault(__webpack_require__(912)),npaSpec_1=__webpack_require__(7377);exports.PacoteClient=class{pacote;config;logger;constructor(pacote,config,logger){this.pacote=pacote,this.config=config,this.logger=logger,(0,guards_1.throwUndefinedOrNull)("pacote",pacote),(0,guards_1.throwUndefinedOrNull)("config",config),(0,guards_1.throwUndefinedOrNull)("logger",logger)}async fetchPackage(request,npaSpec){const requestedPackage=request.dependency.package,response=await this.request(npaSpec,request.clientData),{compareLoose}=semver_1.default,type=npaSpec.type;let versionRange=type===packages_1.PackageVersionType.Alias?npaSpec.subSpec.rawSpec:npaSpec.rawSpec;const resolved={name:type===packages_1.PackageVersionType.Alias?npaSpec.subSpec.name:npaSpec.name,version:versionRange},responseStatus={source:response.source,status:response.status},packumentResponse=response.data,rawVersions=Object.keys(packumentResponse.versions||{}).sort(compareLoose);let{releases,prereleases}=packages_1.VersionUtils.splitReleasesFromArray(rawVersions,this.config.prereleaseTagFilter);const distTags=packumentResponse["dist-tags"]||{},latestTaggedVersion=distTags.latest;latestTaggedVersion&&(releases=packages_1.VersionUtils.lteFromArray(releases,latestTaggedVersion));const suggestLatestVersion=latestTaggedVersion||(releases.length>0?releases[releases.length-1]:null);if(npaSpec.type===npaSpec_1.NpaTypes.Tag&&(versionRange=distTags[requestedPackage.version],!versionRange))return packages_1.ClientResponseFactory.createNoMatch(packages_1.PackageSourceType.Registry,type,responseStatus,suggestLatestVersion);const suggestions=(0,suggestions_1.createSuggestions)(versionRange,releases,prereleases,suggestLatestVersion);return{source:packages_1.PackageSourceType.Registry,responseStatus,type,resolved,suggestions}}async request(npaSpec,options){const before=new Date;try{const packumentResponse=await this.pacote.packument(npaSpec,{before,...options});return{source:clients_1.ClientResponseSource.remote,status:200,data:packumentResponse,rejected:!1}}catch(error){throw{source:clients_1.ClientResponseSource.remote,status:error.code,data:error.message,rejected:!0}}}}},2230:(__unused_webpack_module,exports)=>{var GitHubContributions;Object.defineProperty(exports,"__esModule",{value:!0}),exports.GitHubContributions=void 0,function(GitHubContributions){GitHubContributions.AccessToken="accessToken"}(GitHubContributions||(exports.GitHubContributions=GitHubContributions={}))},3755:(__unused_webpack_module,exports)=>{var NpmContributions;Object.defineProperty(exports,"__esModule",{value:!0}),exports.NpmContributions=void 0,function(NpmContributions){NpmContributions.Caching="npm.caching",NpmContributions.Http="npm.http",NpmContributions.Github="npm.github",NpmContributions.DependencyProperties="npm.dependencyProperties",NpmContributions.FilePatterns="npm.files",NpmContributions.OnSaveChangesTask="npm.onSaveChanges",NpmContributions.PrereleaseTagFilter="npm.prereleaseTagFilter"}(NpmContributions||(exports.NpmContributions=NpmContributions={}))},9787:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},3106:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},7377:(__unused_webpack_module,exports)=>{var NpaTypes;Object.defineProperty(exports,"__esModule",{value:!0}),exports.NpaTypes=void 0,function(NpaTypes){NpaTypes.Git="git",NpaTypes.Remote="remote",NpaTypes.File="file",NpaTypes.Directory="directory",NpaTypes.Tag="tag",NpaTypes.Version="version",NpaTypes.Range="range",NpaTypes.Alias="alias"}(NpaTypes||(exports.NpaTypes=NpaTypes={}))},4085:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NpmConfig=void 0;const abstractProviderConfig_1=__webpack_require__(5141),eNpmContributions_1=__webpack_require__(3755);class NpmConfig extends abstractProviderConfig_1.AbstractProviderConfig{constructor(config,caching,http,github){super("npm",config,caching,http),this.github=github}github;get fileMatcher(){return{language:"json",scheme:"file",pattern:this.filePatterns}}get filePatterns(){return this.config.get(eNpmContributions_1.NpmContributions.FilePatterns)}get dependencyProperties(){return this.config.get(eNpmContributions_1.NpmContributions.DependencyProperties)}get onSaveChangesTask(){return this.config.get(eNpmContributions_1.NpmContributions.OnSaveChangesTask)}get prereleaseTagFilter(){return this.config.get(eNpmContributions_1.NpmContributions.PrereleaseTagFilter)}}exports.NpmConfig=NpmConfig},8060:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.configureContainer=void 0;const serviceUtils_1=__webpack_require__(9976);exports.configureContainer=async function(serviceProvider,services){return(0,serviceUtils_1.addCachingOptions)(services),(0,serviceUtils_1.addHttpOptions)(services),(0,serviceUtils_1.addGithubOptions)(services),(0,serviceUtils_1.addNpmConfig)(services),(0,serviceUtils_1.addJsonClient)(services),(0,serviceUtils_1.addGitHubClient)(services),(0,serviceUtils_1.addPacoteClient)(services),(0,serviceUtils_1.addNpmPackageClient)(services),(0,serviceUtils_1.addSuggestionProvider)(services),await services.buildChild("npm",serviceProvider)}},2675:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NpmSuggestionProvider=void 0;const packages_1=__webpack_require__(7074),suggestions_1=__webpack_require__(804),node_os_1=__webpack_require__(612),node_path_1=__webpack_require__(9411),npmUtils_1=__webpack_require__(3813),complexTypeHandlers={[packages_1.PackageDescriptorType.version]:packages_1.createVersionDescFromJsonNode};class NpmSuggestionProvider extends suggestions_1.SuggestionProvider{constructor(client,packageCache,logger){super(client,packageCache,logger),this.config=client.config,this.suggestionReplaceFn=npmUtils_1.npmReplaceVersion}config;suggestionReplaceFn;parseDependencies(packagePath,packageText){const options={includePropNames:this.config.dependencyProperties,complexTypeHandlers},packageDescriptors=(0,packages_1.extractPackageDependenciesFromJson)(packageText,options),packageDependencies=[];for(const packageDesc of packageDescriptors){const nameDesc=packageDesc.getType(packages_1.PackageDescriptorType.name);let name=nameDesc.name;const atIndex=name.indexOf("@");if(atIndex>0&&(name=name.slice(0,atIndex)),packageDesc.hasType(packages_1.PackageDescriptorType.version)){const versionDesc=packageDesc.getType(packages_1.PackageDescriptorType.version);packageDependencies.push(new packages_1.PackageDependency((0,packages_1.createPackageResource)(name,versionDesc.version,packagePath),nameDesc.nameRange,versionDesc.versionRange,packageDesc))}else;}return packageDependencies}async preFetchSuggestions(projectPath,packagePath){this.config.github.accessToken&&this.config.github.accessToken.length>0&&this.config.github.defrost();const userConfigPath=(0,node_path_1.resolve)((0,node_os_1.homedir)(),".npmrc"),resolveDotFilePaths=[packagePath,projectPath],npmRcFilePath=await(0,npmUtils_1.resolveDotFilePath)(".npmrc",resolveDotFilePaths),hasNpmRcFile=npmRcFilePath.length>0;this.logger.debug("Resolved .npmrc is %s",!!hasNpmRcFile&&npmRcFilePath);let envFilePath="";hasNpmRcFile&&(envFilePath=await(0,npmUtils_1.resolveDotFilePath)(".env",resolveDotFilePaths));const hasEnvFile=envFilePath.length>0;this.logger.debug("Resolved .env is %s",!!hasEnvFile&&envFilePath);const npmCliOptions={projectPath,userConfigPath,npmRcFilePath,envFilePath,hasNpmRcFile,hasEnvFile};return(0,npmUtils_1.createPacoteOptions)(packagePath,npmCliOptions)}}exports.NpmSuggestionProvider=NpmSuggestionProvider},3813:function(__unused_webpack_module,exports,__webpack_require__){var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPacoteOptions=exports.getDotEnv=exports.resolveDotFilePath=exports.convertNpmErrorToResponse=exports.npmReplaceVersion=void 0;const config_1=__importDefault(__webpack_require__(3180)),packages_1=__webpack_require__(7074),utils_1=__webpack_require__(7130),dotenv_1=__importDefault(__webpack_require__(5142)),node_path_1=__webpack_require__(9411);async function getDotEnv(envPath){return dotenv_1.default.parse(await(0,utils_1.readFile)(envPath))}exports.npmReplaceVersion=function(suggestionUpdate){return suggestionUpdate.packageSource===packages_1.PackageSourceType.Github?function(suggestionUpdate){return suggestionUpdate.parsedVersion.replace(suggestionUpdate.fetchedVersion,suggestionUpdate.suggestionVersion)}(suggestionUpdate):suggestionUpdate.packageVersionType===packages_1.PackageVersionType.Alias?function(suggestionUpdate){const preservedLeadingVersion=packages_1.VersionUtils.formatWithExistingLeading(suggestionUpdate.parsedVersion,suggestionUpdate.suggestionVersion);return`npm:${suggestionUpdate.fetchedName}@${preservedLeadingVersion}`}(suggestionUpdate):packages_1.VersionUtils.formatWithExistingLeading(suggestionUpdate.parsedVersion,suggestionUpdate.suggestionVersion)},exports.convertNpmErrorToResponse=function(error,source){return{source,status:error.code,data:error.message}},exports.resolveDotFilePath=async function(dotFileName,cwds){for(const cwd of cwds){const checkPath=(0,node_path_1.resolve)(cwd,dotFileName);if(await(0,utils_1.fileExists)(checkPath))return checkPath}return""},exports.getDotEnv=getDotEnv,exports.createPacoteOptions=async function(packagePath,options){const{npmRcFilePath,envFilePath,userConfigPath,hasNpmRcFile,hasEnvFile}=options,npmCliConfig=new config_1.default({shorthands:{},definitions:{},npmPath:packagePath,cwd:hasNpmRcFile?npmRcFilePath:packagePath,argv:["","",`--userconfig=${userConfigPath}`],env:hasEnvFile?await getDotEnv(envFilePath):{}});return await npmCliConfig.load(),npmCliConfig.list.reduce(((memo,list)=>({...memo,...list})),{cwd:packagePath})}},906:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GitHubOptions=void 0;const configuration_1=__webpack_require__(605),eGitHubContributions_1=__webpack_require__(2230);class GitHubOptions extends configuration_1.OptionsWithFallback{constructor(config,section,fallbackSection=null){super(config,section,fallbackSection)}get accessToken(){return this.getOrDefault(eGitHubContributions_1.GitHubContributions.AccessToken,null)}}exports.GitHubOptions=GitHubOptions},9976:function(__unused_webpack_module,exports,__webpack_require__){var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.addSuggestionProvider=exports.addNpmPackageClient=exports.addPacoteClient=exports.addGitHubClient=exports.addJsonClient=exports.addNpmConfig=exports.addGithubOptions=exports.addHttpOptions=exports.addCachingOptions=void 0;const caching_1=__webpack_require__(2304),http_1=__webpack_require__(5829),utils_1=__webpack_require__(7130),http_2=__webpack_require__(8128),pacote_1=__importDefault(__webpack_require__(9117)),githubClient_1=__webpack_require__(5050),npmPackageClient_1=__webpack_require__(833),pacoteClient_1=__webpack_require__(9541),eNpmContributions_1=__webpack_require__(3755),npmConfig_1=__webpack_require__(4085),npmSuggestionProvider_1=__webpack_require__(2675),githubOptions_1=__webpack_require__(906);exports.addCachingOptions=function(services){services.addSingleton((0,utils_1.nameOf)().npmCachingOpts,(container=>new caching_1.CachingOptions(container.appConfig,eNpmContributions_1.NpmContributions.Caching,"caching")))},exports.addHttpOptions=function(services){services.addSingleton((0,utils_1.nameOf)().npmHttpOpts,(container=>new http_1.HttpOptions(container.appConfig,eNpmContributions_1.NpmContributions.Http,"http")))},exports.addGithubOptions=function(services){services.addSingleton((0,utils_1.nameOf)().npmGitHubOpts,(container=>new githubOptions_1.GitHubOptions(container.appConfig,eNpmContributions_1.NpmContributions.Github,"github")))},exports.addNpmConfig=function(services){services.addSingleton((0,utils_1.nameOf)().npmConfig,(container=>new npmConfig_1.NpmConfig(container.appConfig,container.npmCachingOpts,container.npmHttpOpts,container.npmGitHubOpts)))},exports.addJsonClient=function(services){const serviceName=(0,utils_1.nameOf)().githubJsonClient;services.addSingleton(serviceName,(container=>(0,http_2.createJsonClient)({caching:container.npmCachingOpts,http:container.npmHttpOpts},container.logger.child({namespace:serviceName}))))},exports.addGitHubClient=function(services){const serviceName=(0,utils_1.nameOf)().githubClient;services.addSingleton(serviceName,(container=>new githubClient_1.GitHubClient(container.npmConfig,container.githubJsonClient,container.logger.child({namespace:serviceName}))))},exports.addPacoteClient=function(services){const serviceName=(0,utils_1.nameOf)().pacoteClient;services.addSingleton(serviceName,(container=>new pacoteClient_1.PacoteClient(pacote_1.default,container.npmConfig,container.logger.child({namespace:serviceName}))))},exports.addNpmPackageClient=function(services){const serviceName=(0,utils_1.nameOf)().npmClient;services.addSingleton(serviceName,(container=>new npmPackageClient_1.NpmPackageClient(container.npmConfig,container.pacoteClient,container.githubClient,container.logger.child({namespace:serviceName}))))},exports.addSuggestionProvider=function(services){services.addScoped((0,utils_1.nameOf)().suggestionProvider,(container=>new npmSuggestionProvider_1.NpmSuggestionProvider(container.npmClient,container.packageCache,container.logger.child({namespace:"npmSuggestionProvider"}))))}}};
//# sourceMappingURL=689.bundle.js.map